# 실행 컨텍스트

- 소스코드를 실행하는데 필요한 환경을 제공하고 코드의 실행결과를 실제로 관리 함
- 전역,함수,모듈,eval 이 존재

## 자바스크립트 소스코드 동작과정

- 소스코드 평가를 먼저 하고 소스코드의 실행=> 실행컨텍스트에 실행된내용을 반복

  - 소스코드 평가 란?

    - 실행 컨텍스트를 생성하고 변수,함수등의 선언문 만을 실행하여 해당 변수나 함수의 식별자를 Lexical Enviorment에 등록
      - Lexical Enviorment란 ?
        - Environment Record 와 OuterLexicalEnviroment 로 이루어짐
        - Environment Record에는 스코프에 포함된 식별자를 등록 , 식별자에 바인딩된값을 관리
        - OuterLexicalEnviroment에는 상위 스코프를 참조 (외부 렉시컬환경 즉 해당 실행 콘텍스트를 만들어준 환경 (전역->함수호출))

  - 소스코드 실행이란 ?
    - 소스코드 평가시 등록된 것들의 식별자 정보를 확인하고 값을 할당하고 함수를 호출함

## 전역 Lexical Enviorment

- Enviroment Record에 Object Env Rec,Declarative Env Rec , ThisBinding이 존재

  - Object Env Rec에는 BindingObject를 통해 var로선언한것들과 함수선언문이 저장
  - Declarative Env Rec에는 let과 const 것들이 저장

- OutEnv가 존재

## 함수내 Lexical Enviorment

- Enviroment Record에는 매개변수 ,argument객체 ,변수들 존재
- ThisBinding과 OutEnv가 존재

## 실행 콘텍스트 동작 과정

```js
const x=1;
const y=2;

function foo(a){
    const x=10;
    const y=20;
    console.log(a+x+y;)
}
foo(100);

console.log(x+y)


```

- 1. 전역 코드 평가 (전역변수인 x와 y를 => Declarative Env Rec에 함수 foo를 Object Env Rec에 등록 ) => (Global Lexical Enviorment의 Enviorment Record에 등록,OuterLexicalEnviroment=null)
- 2. 전역 코드 실행 (전역변수 x에 값 1할당 , 전역변수 y에 값 2 할당)
- 3. foo 함수 호출
- 4. 매개변수인 a와 지역변수 x,y 그리고 arguments객체가 생성되어 실행콘텍스트의 지역스코프에 등록 , 또한 this 바인딩결정 (Function Lexical Enviorment의 의 Enviorment Record에 등록 OuterLexicalEnviroment=global(전역))
- 5. 함수 스코프 코드 실행 , x=10 y=10값 할당 console.log 실행 a,x,y중 값이 없는것은 스코프체인을 통해 검색,
- 6. 함수 종료후 전역 코드로 이동
- 7. 전역코드의 console.log(x+y)를 출력
